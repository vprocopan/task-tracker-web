{% extends "base.html" %}
{% block content %}
<div class="container mt-5" style="max-width:700px;">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">ğŸ“ My Tasks</h2>
    <a href="{{ url_for('auth.logout') }}" class="btn btn-outline-danger btn-sm">Logout</a>
  </div>

  <!-- Add Task Form -->
  <form action="{{ url_for('tasks.add_task') }}" method="POST" class="input-group mb-4">
    <input type="text" name="title" class="form-control" placeholder="Add a new task..." required>
    <button class="btn btn-primary" type="submit">Add</button>
  </form>

  <!-- Task List -->
  {% if tasks %}
    <ul class="list-group shadow-sm">
      {% for task in tasks %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
            <!-- Checkbox toggle -->
            <a href="{{ url_for('tasks.toggle_task', task_id=task.id) }}" 
               class="btn btn-sm {% if task.completed %}btn-success{% else %}btn-outline-secondary{% endif %} me-3"
               title="Toggle status">
               {% if task.completed %}âœ“{% else %}&nbsp;{% endif %}
            </a>

            <!-- Task title -->
            {% if task.completed %}
              <span class="text-decoration-line-through text-muted">{{ task.title }}</span>
            {% else %}
              <span>{{ task.title }}</span>
            {% endif %}
          </div>

          <!-- Actions -->
          <div>
            <span class="badge {% if task.completed %}bg-success{% else %}bg-warning text-dark{% endif %}">
              {% if task.completed %}Done{% else %}Pending{% endif %}
            </span>
            <a href="{{ url_for('tasks.delete_task', task_id=task.id) }}" 
               class="btn btn-outline-danger btn-sm ms-2" title="Delete task">ğŸ—‘</a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info text-center">No tasks yet â€” add one above!</div>
  {% endif %}
</div>
{% endblock %}